<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download a data series from the IMF — imf_data • imfr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download a data series from the IMF — imf_data"><meta property="og:description" content="Function to request data from a database through the IMF API endpoint."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">imfr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ParametersList.html">ParametersList</a>
    </li>
    <li>
      <a href="../articles/ParametersVectors.html">ParametersVectors</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/chriscarrollsmith/imfr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download a data series from the IMF</h1>
    <small class="dont-index">Source: <a href="https://github.com/chriscarrollsmith/imfr/blob/HEAD/R/data_functions.R" class="external-link"><code>R/data_functions.R</code></a></small>
    <div class="hidden name"><code>imf_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to request data from a database through the IMF API endpoint.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre><code>imf_data(database_id, parameters, start_year, end_year ...)</code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>database_id</dt>
<dd><p>character string. Database ID for database from which
you would like to request data. Can be found using
<code><a href="imf_databases.html">imf_databases</a></code>.</p></dd>


<dt>parameters</dt>
<dd><p>list of data frames providing input parameters for your
API request. Retrieve list of all possible input parameters using
<code><a href="imf_parameters.html">imf_parameters</a></code> and filter each data frame in the list to
reduce it to the inputs you want.</p></dd>


<dt>start_year</dt>
<dd><p>integer four-digit year. Earliest year for which you would like
to request data.</p></dd>


<dt>end_year</dt>
<dd><p>integer four-digit year. Latest year for which you would like to
request data.</p></dd>


<dt>print_url</dt>
<dd><p>logical. Whether to print the URL used in the API call.
Can be useful for debugging.</p></dd>


<dt>times</dt>
<dd><p>numeric. Maximum number of requests to attempt.</p></dd>


<dt>accounting_entry, activity, adjustment, age, classification, cofog_function, commodity, comp_method, composite_breakdown, counterpart_area, counterpart_sector, currency_denom, cust_breakdown, disability_status, education_lev, expenditure, financial_institution, flow_stock_entry, freq, functional_cat, gfs_sto, income_wealth_quantile, indicator, instr_asset, instrument_and_assets_classification, int_acc_item, maturity, occupation, prices, product, ref_area, ref_sector, reporting_type, series, sex, sto, summary_statistics, survey, transformation, type, unit_measure, urbanisation, valuation</dt>
<dd><p>character vector. Use <code>imf_parameters</code> to identify which parameters to
use for requests from a given database and to see all valid input codes for
each parameter.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a tidy data frame with the data series.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Only the <code>database_id</code> argument is strictly required; all other
arguments are optional. If you provide a <code>database_id</code> without any other
arguments, the function will attempt to download the entire database.
However, many databases available through the API are too large to download
in their entirety, and your request will fail. Additional arguments to the
function act as filter parameters to reduce the size of the returned dataset.
For instance, supplying <code>c("A","M")</code> as the <code>freq</code> argument will
return all database observations of annual or monthly frequency, while
excluding all observations of quarterly frequency.</p>
<p>There are two ways to supply parameters for your API request. The optimal way
is to retrieve a list of data frames using <code><a href="imf_parameters.html">imf_parameters</a></code>,
filter each data frame to retain only the parameters you want, and then
supply the modified list object to <code>imf_data</code> as its <code>parameters</code>
argument. However, users who are not comfortable modifying data frames in a
nested list may find it easier to instead supply one or more character
vectors as arguments, as in the example in the previous paragraph. (There are
a total of 44 possible parameters for making request from various databases
through the API, and each parameter uses unique input codes, which is why the
<code>parameters</code> list method simplifies things!) These two methods for
specifying parameters may not be combined. Only  <code>database_id</code>,
<code>start_year</code>, <code>end_year</code>, <code>print_url</code>, and <code>times</code>
arguments may be used in combination with a <code>parameters</code> list object;
any other arguments will be ignored (and a warning thrown).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Retrieve "Assets (with Fund Record), National Currency" series from the</span></span></span>
<span class="r-in"><span><span class="co"># Balance of Payments database using the list object method</span></span></span>
<span class="r-in"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="imf_parameters.html">imf_parameters</a></span><span class="op">(</span>database_id <span class="op">=</span> <span class="st">'BOP'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">params</span><span class="op">$</span><span class="va">indicator</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">indicator</span>,</span></span>
<span class="r-in"><span>                           <span class="va">description</span> <span class="op">==</span> <span class="st">'Assets (with Fund Record), National Currency'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(params$indicator, description == "Assets (with Fund Record), National Currency"):</span> object 'description' not found</span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">imf_data</span><span class="op">(</span>database_id <span class="op">=</span> <span class="st">'BOP'</span>, parameters <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Request failed [404]. Retrying in 1.1 seconds...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Request failed [404]. Retrying in 3.6 seconds...</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> data.imf.org appears to be down.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Retrieve "Assets (with Fund Record), National Currency" series from the</span></span></span>
<span class="r-in"><span><span class="co"># Balance of Payments database using the character vector method</span></span></span>
<span class="r-in"><span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="imf_parameters.html">imf_parameters</a></span><span class="op">(</span>database_id <span class="op">=</span> <span class="st">'BOP'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">indicator_code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">indicator</span>,</span></span>
<span class="r-in"><span>                           <span class="va">description</span> <span class="op">==</span> <span class="st">'Assets (with Fund Record), National Currency'</span><span class="op">)</span><span class="op">$</span><span class="va">input_code</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in filter(params$indicator, description == "Assets (with Fund Record), National Currency"):</span> object 'description' not found</span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">imf_data</span><span class="op">(</span>database_id <span class="op">=</span> <span class="st">'BOP'</span>, indicator <span class="op">=</span> <span class="va">indicator_code</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in map(1:length(name_vector), function(x) {    if (name_vector[x] %in% vector_vars[supplied_vectors]) {        df &lt;- filter(data_dimensions[[x]], input_code %in% eval(parse(text = name_vector[x])))        if (any(!(eval(parse(text = name_vector[x])) %in% df$input_code))) {            warning(paste0(sum(!(eval(parse(text = name_vector[x])) %in%                 df$input_code)), " invalid user-supplied input code(s) for ",                 name_vector[x], " parameter will be ignored.\nUse imf_parameters('",                 database_id, "')$", name_vector[x], " to see all valid input codes for this parameter.\nNote that codes are case sensitive.",                 immediate. = T))        }        df &lt;- if (nrow(df) == nrow(data_dimensions[[x]])) {            data.frame(input_code = c(), description = c())        }        else {            df        }        return(df)    }    else {        return(data.frame(input_code = c(), description = c()))    }}):</span> <span style="color: #00BBBB;">ℹ</span> In index: 3.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `filter()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `input_code %in% eval(parse(text = name_vector[x]))`.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> object 'indicator_code' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christopher Gandrud, Christopher Smith.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

