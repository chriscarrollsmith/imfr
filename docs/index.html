<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Download Data from the International Monetary Fund's Data API • imfr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Download Data from the International Monetary Fund's Data API">
<meta property="og:description" content="Explore and download data from the International Monetary Fund's
    data API &lt;http://data.imf.org/&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">imfr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ParametersList.html">ParametersList</a>
    </li>
    <li>
      <a href="articles/ParametersVectors.html">ParametersVectors</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/chriscarrollsmith/imfr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="imfr">imfr<a class="anchor" aria-label="anchor" href="#imfr"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>Originally created by Christopher Gandrud, imfr is an R package for downloading data from the International Monetary Fund API endpoint. Version 2.0.0, by Christopher C. Smith, is an extensive revision of the package to make it both more powerful and more user-friendly. Regrettably, Version 2.0.0 is <em>not</em> backward-compatible; you will need to update old scripts if you update the package. The changes to the functionality of the package in this version were extensive, and adoption of the previous version was judged limited enough to make backward compatibility unnecessary.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the development version of imfr, use:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"chriscarrollsmith/imfr"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>I recommend using imfr in combination with the tidyverse, stringr, and knitr libraries, which introduces a powerful set of functions for viewing and manipulating the data types returned by imfr functions. Each of these packages can be installed from the CRAN repository using the <code>install.packages</code> function. Once they are installed, load these packages using the <code>library</code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chriscarrollsmith/imfr" class="external-link">imfr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──</span></span>
<span><span class="co">#&gt; ✔ ggplot2 3.4.0     ✔ purrr   1.0.1</span></span>
<span><span class="co">#&gt; ✔ tibble  3.1.8     ✔ dplyr   1.1.0</span></span>
<span><span class="co">#&gt; ✔ tidyr   1.3.0     ✔ stringr 1.5.0</span></span>
<span><span class="co">#&gt; ✔ readr   2.1.3     ✔ forcats 1.0.0</span></span>
<span><span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span>
<span><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span></code></pre></div>
<p>The imfr package introduces four core functions: <code>imf_databases</code>, <code>imf_parameters</code>, <code>imf_parameter_defs</code>, and <code>imf_data</code>. The function for downloading datasets is <code>imf_data</code>, but you will need the other functions to determine what arguments to supply to <code>imf_data</code>. For instance, all calls to <code>imf_data</code> require a database_id. This is because the IMF serves many different databases through its API, and the API needs to know which of these many databases you’re requesting data from. To obtain a list of databases, use <code>imf_databases</code>, like so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Fetch the list of databases available through the IMF API</span></span>
<span><span class="va">databases</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imf_databases.html">imf_databases</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This function returns the IMF’s listing of 259 databases available through the API. (In reality, 12 of the listed databases are defunct and not actually available: GFSSSUC2016, PSBSFAD, FAS_2015, GFS01, FAS_2017, IFS_2018M04, FM202010, APDREO202010, AFRREO202010, WHDREO202010, BOPAGG_2020, FAS.)</p>
<p>To view and explore the database list, it’s possible to open a viewing pane with <code>View(databases)</code> or to create an attractive table with <code>kintr::kable(databases)</code>. Or, if you already know which database you want, you can fetch the corresponding code by searching the description column for the database name with <code><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">stringr::str_detect</a></code>. For instance, here’s how to search for the Primary Commodity Price System:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter the 'databases' data frame for descriptions matching `commodity price`</span></span>
<span><span class="va">commodity_db</span> <span class="op">&lt;-</span> <span class="va">databases</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">databases</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"commodity price"</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result using knitr::kable</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">commodity_db</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">database_id</th>
<th align="left">description</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">245</td>
<td align="left">PCPS</td>
<td align="left">Primary Commodity Price System (PCPS)</td>
</tr></tbody>
</table>
<p>Once you have a database_id, it’s possible to make a call to <code>imf_data</code> to fetch the entire database: <code>imf_data(commodity_db$database_id)</code>. However, while this will succeed for some small databases, it will fail for many of the larger ones. And even when it succeeds, fetching an entire database can take a long time. You’re much better off supplying additional filter parameters to reduce the size of your request.</p>
<p>Requests to databases available through the IMF API are complicated by the fact that each database uses a different set of parameters when making a request, and you also have to have the list of valid input codes for each parameter. You can obtain these using <code>imf_parameters</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch list of valid parameters and input codes for commodity price database</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imf_parameters.html">imf_parameters</a></span><span class="op">(</span><span class="va">commodity_db</span><span class="op">$</span><span class="va">database_id</span><span class="op">)</span></span></code></pre></div>
<p>The <code>imf_parameters</code> function returns a named list of data frames. Each named list item corresponds to a parameter used in making requests from the database.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check class of `params` object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "list"</span></span>
<span></span>
<span><span class="co"># Check names of `params` list items</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "freq"         "ref_area"     "commodity"    "unit_measure"</span></span></code></pre></div>
<p>In the event that a parameter name is not self-explanatory, the <code>imf_parameter_defs</code> function can be used to fetch short text descriptions of each parameter:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch and display parameter text descriptions for the commodity price database</span></span>
<span><span class="va">param_descriptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imf_parameter_defs.html">imf_parameter_defs</a></span><span class="op">(</span><span class="va">commodity_db</span><span class="op">$</span><span class="va">database_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">param_descriptions</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">parameter</th>
<th align="left">description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">freq</td>
<td align="left">Frequency</td>
</tr>
<tr class="even">
<td align="left">ref_area</td>
<td align="left">Geographical Areas</td>
</tr>
<tr class="odd">
<td align="left">commodity</td>
<td align="left">Indicator</td>
</tr>
<tr class="even">
<td align="left">unit_measure</td>
<td align="left">Unit</td>
</tr>
</tbody>
</table>
<p>Each named list item is a data frame containing a vector of valid input codes that can be used with the named parameter, and a vector of text descriptions of what each code represents. The <code>$</code> operator can be used to access the data frame for a given parameter, and the data frame can be explored using <code>kable</code> or <code>View</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the data frame of valid input codes for the frequency parameter</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">freq</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">input_code</th>
<th align="left">description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="left">Annual</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
<tr class="odd">
<td align="left">Q</td>
<td align="left">Quarterly</td>
</tr>
</tbody>
</table>
<p>There are two ways to supply parameters to <code>imf_data</code>: by supplying vector arguments or by supplying a modified parameters list.</p>
<p>To supply vector arguments, just find the codes you want and supply them to <code>imf_data</code> using the parameter name as the argument name. The example below shows how to request 2000–2015 annual coal prices from the Primary Commodity Price System database:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch the 'freq' input code for annual frequency</span></span>
<span><span class="va">selected_freq</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">freq</span><span class="op">$</span><span class="va">input_code</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">freq</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"annual"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Fetch the 'commodity' input code for coal</span></span>
<span><span class="va">selected_commodity</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">commodity</span><span class="op">$</span><span class="va">input_code</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">commodity</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"coal index"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Fetch the 'unit_measure' input code for index</span></span>
<span><span class="va">selected_unit_measure</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">unit_measure</span><span class="op">$</span><span class="va">input_code</span><span class="op">[</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">unit_measure</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"index"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Request data from the API</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imf_data.html">imf_data</a></span><span class="op">(</span>database_id <span class="op">=</span> <span class="va">commodity_db</span><span class="op">$</span><span class="va">database_id</span>,</span>
<span>         freq <span class="op">=</span> <span class="va">selected_freq</span>, commodity <span class="op">=</span> <span class="va">selected_commodity</span>,</span>
<span>         unit_measure <span class="op">=</span> <span class="va">selected_unit_measure</span>,</span>
<span>         start_year <span class="op">=</span> <span class="fl">2000</span>, end_year <span class="op">=</span> <span class="fl">2015</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in curl::curl_fetch_memory(url, handle = handle): Failure when receiving data from the peer</span></span>
<span><span class="co">#&gt; Request failed [ERROR]. Retrying in 1.1 seconds...</span></span>
<span><span class="co">#&gt; Error in curl::curl_fetch_memory(url, handle = handle): Failure when receiving data from the peer</span></span>
<span><span class="co">#&gt; Request failed [ERROR]. Retrying in 3.6 seconds...</span></span>
<span></span>
<span><span class="co"># Display the first few entries in the retrieved data frame using knitr::kable</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">date</th>
<th align="left">value</th>
<th align="left">freq</th>
<th align="left">ref_area</th>
<th align="left">commodity</th>
<th align="left">unit_measure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2000</td>
<td align="left">39.3510230293202</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2001</td>
<td align="left">49.3378587284039</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="odd">
<td align="left">2002</td>
<td align="left">39.4949091648006</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2003</td>
<td align="left">43.2878876950788</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="odd">
<td align="left">2004</td>
<td align="left">82.9185858052862</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2005</td>
<td align="left">71.9223526096731</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
</tbody>
</table>
<p>To supply a list object, modify each data frame in the <code>params</code> list object to retain only the rows you want, and then supply the modified list object to <code>imf_data</code> as its <code>parameters</code> argument. Here is how to make the same request for annual coal price data using a parameters list:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter the frequency data frame for annual frequency</span></span>
<span><span class="va">params</span><span class="op">$</span><span class="va">freq</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">freq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"annual"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter the commodity data frame for the coal index</span></span>
<span><span class="va">params</span><span class="op">$</span><span class="va">commodity</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">commodity</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"coal index"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter the unit_measure data frame for index</span></span>
<span><span class="va">params</span><span class="op">$</span><span class="va">unit_measure</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">unit_measure</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">description</span><span class="op">)</span>,<span class="st">"index"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request data from the API</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/imf_data.html">imf_data</a></span><span class="op">(</span>database_id <span class="op">=</span> <span class="va">commodity_db</span><span class="op">$</span><span class="va">database_id</span>,</span>
<span>               parameters <span class="op">=</span> <span class="va">params</span>,</span>
<span>         start_year <span class="op">=</span> <span class="fl">2000</span>, end_year <span class="op">=</span> <span class="fl">2015</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few entries in the retrieved data frame using knitr::kable</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">date</th>
<th align="left">value</th>
<th align="left">freq</th>
<th align="left">ref_area</th>
<th align="left">commodity</th>
<th align="left">unit_measure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2000</td>
<td align="left">39.3510230293202</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2001</td>
<td align="left">49.3378587284039</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="odd">
<td align="left">2002</td>
<td align="left">39.4949091648006</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2003</td>
<td align="left">43.2878876950788</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="odd">
<td align="left">2004</td>
<td align="left">82.9185858052862</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
<tr class="even">
<td align="left">2005</td>
<td align="left">71.9223526096731</td>
<td align="left">A</td>
<td align="left">W00</td>
<td align="left">PCOAL</td>
<td align="left">IX</td>
</tr>
</tbody>
</table>
<p>See also the vignettes, which can be accessed with <code><a href="articles/ParametersList.html">vignette("ParametersList")</a></code> and <code><a href="articles/ParametersVectors.html">vignette("ParametersVectors")</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=imfr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/chriscarrollsmith/imfr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/chriscarrollsmith/imfr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing imfr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christopher Gandrud <br><small class="roles"> Author </small>  </li>
<li>Christopher Smith <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Christopher Gandrud, Christopher Smith.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
